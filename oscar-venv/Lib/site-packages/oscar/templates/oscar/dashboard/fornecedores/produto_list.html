{% extends 'fornecedores/base.html' %}

{% block dashboard_title %}Meus Produtos{% endblock %}

{% block dashboard_actions %}
<div class="btn-group mr-2">
    <a href="{% url 'fornecedores:produto-create' %}" class="btn btn-sm btn-outline-secondary">
        <i class="fas fa-plus"></i> Adicionar Produto
    </a>
</div>
{% endblock %}

{% block dashboard_content %}
<div class="table-responsive">
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Categoria</th>
                <th>Preço</th>
                <th>Estoque</th>
                <th>Status</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            {% for produto in produtos %}
            <tr>
                <td>{{ produto.nome }}</td>
                <td>{{ produto.categoria }}</td>
                <td>€ {{ produto.preco|floatformat:2 }}</td>
                <td>{{ produto.estoque }} {{ produto.unidade_medida }}</td>
                <td>
                    {% if produto.estoque > 0 %}
                    <span class="badge badge-success">Disponível</span>
                    {% else %}
                    <span class="badge badge-danger">Esgotado</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'fornecedores:produto-update' produto.id %}" 
                       class="btn btn-sm btn-outline-primary">
                        <i class="fas fa-edit"></i>
                    </a>
                    <a href="{% url 'fornecedores:produto-delete' produto.id %}" 
                       class="btn btn-sm btn-outline-danger">
                        <i class="fas fa-trash"></i>
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6">Nenhum produto cadastrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}